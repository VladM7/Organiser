"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sudo = exports.default = void 0;

require("source-map-support/register");

var _util = require("util");

var _child_process = require("child_process");

var _sudoPrompt = _interopRequireDefault(require("sudo-prompt"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// eslint-disable-next-line @typescript-eslint/no-explicit-any
const which = async (type, prog, promise) => {
  if ((0, _child_process.spawnSync)('which', [prog]).status === 0) {
    await promise();
  } else {
    throw new Error(`${prog} is required to install ${type} packages`);
  }
};

const sudo = (type, prog, args) => which(type, prog, () => (0, _util.promisify)(_sudoPrompt.default.exec)(`${prog} ${args}`, {
  name: 'Electron Forge'
}));

exports.sudo = sudo;
var _default = which;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2xpbnV4LWluc3RhbGxlci50cyJdLCJuYW1lcyI6WyJ3aGljaCIsInR5cGUiLCJwcm9nIiwicHJvbWlzZSIsInN0YXR1cyIsIkVycm9yIiwic3VkbyIsImFyZ3MiLCJzdWRvUHJvbXB0IiwiZXhlYyIsIm5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUE7QUFDQSxNQUFNQSxLQUFLLEdBQUcsT0FBT0MsSUFBUCxFQUFxQkMsSUFBckIsRUFBbUNDLE9BQW5DLEtBQWtGO0FBQzlGLE1BQUksOEJBQVUsT0FBVixFQUFtQixDQUFDRCxJQUFELENBQW5CLEVBQTJCRSxNQUEzQixLQUFzQyxDQUExQyxFQUE2QztBQUMzQyxVQUFNRCxPQUFPLEVBQWI7QUFDRCxHQUZELE1BRU87QUFDTCxVQUFNLElBQUlFLEtBQUosQ0FBVyxHQUFFSCxJQUFLLDJCQUEwQkQsSUFBSyxXQUFqRCxDQUFOO0FBQ0Q7QUFDRixDQU5EOztBQVFPLE1BQU1LLElBQUksR0FBRyxDQUFDTCxJQUFELEVBQWVDLElBQWYsRUFBNkJLLElBQTdCLEtBQ2xCUCxLQUFLLENBQUNDLElBQUQsRUFBT0MsSUFBUCxFQUFhLE1BQU0scUJBQVVNLG9CQUFXQyxJQUFyQixFQUE0QixHQUFFUCxJQUFLLElBQUdLLElBQUssRUFBM0MsRUFBOEM7QUFBRUcsRUFBQUEsSUFBSSxFQUFFO0FBQVIsQ0FBOUMsQ0FBbkIsQ0FEQTs7O2VBR1FWLEsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcbmltcG9ydCB7IHNwYXduU3luYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHN1ZG9Qcm9tcHQgZnJvbSAnc3Vkby1wcm9tcHQnO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3Qgd2hpY2ggPSBhc3luYyAodHlwZTogc3RyaW5nLCBwcm9nOiBzdHJpbmcsIHByb21pc2U6ICgpID0+IFByb21pc2U8YW55Pik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBpZiAoc3Bhd25TeW5jKCd3aGljaCcsIFtwcm9nXSkuc3RhdHVzID09PSAwKSB7XG4gICAgYXdhaXQgcHJvbWlzZSgpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtwcm9nfSBpcyByZXF1aXJlZCB0byBpbnN0YWxsICR7dHlwZX0gcGFja2FnZXNgKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHN1ZG8gPSAodHlwZTogc3RyaW5nLCBwcm9nOiBzdHJpbmcsIGFyZ3M6IHN0cmluZyk6IFByb21pc2U8dm9pZD4gPT5cbiAgd2hpY2godHlwZSwgcHJvZywgKCkgPT4gcHJvbWlzaWZ5KHN1ZG9Qcm9tcHQuZXhlYykoYCR7cHJvZ30gJHthcmdzfWAsIHsgbmFtZTogJ0VsZWN0cm9uIEZvcmdlJyB9KSk7XG5cbmV4cG9ydCBkZWZhdWx0IHdoaWNoO1xuIl19