"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.yarnOrNpmSpawn = exports.hasYarn = exports.default = void 0;

require("source-map-support/register");

var _chalk = _interopRequireDefault(require("chalk"));

var _crossSpawnPromise = require("@malept/cross-spawn-promise");

var _logSymbols = _interopRequireDefault(require("log-symbols"));

var _yarnOrNpm = _interopRequireDefault(require("yarn-or-npm"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const safeYarnOrNpm = () => {
  const system = (0, _yarnOrNpm.default)();

  switch (process.env.NODE_INSTALLER) {
    case 'yarn':
    case 'npm':
      return process.env.NODE_INSTALLER;

    default:
      if (process.env.NODE_INSTALLER) {
        // eslint-disable-next-line no-console
        console.warn(_logSymbols.default.warning, _chalk.default.yellow(`Unknown NODE_INSTALLER, using detected installer ${system}`));
      }

      return system;
  }
};

var _default = safeYarnOrNpm; // eslint-disable-next-line max-len

exports.default = _default;

const yarnOrNpmSpawn = (args, opts) => (0, _crossSpawnPromise.spawn)(safeYarnOrNpm(), args, opts);

exports.yarnOrNpmSpawn = yarnOrNpmSpawn;

const hasYarn = () => safeYarnOrNpm() === 'yarn';

exports.hasYarn = hasYarn;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3lhcm4tb3ItbnBtLnRzIl0sIm5hbWVzIjpbInNhZmVZYXJuT3JOcG0iLCJzeXN0ZW0iLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9JTlNUQUxMRVIiLCJjb25zb2xlIiwid2FybiIsImxvZ1N5bWJvbHMiLCJ3YXJuaW5nIiwiY2hhbGsiLCJ5ZWxsb3ciLCJ5YXJuT3JOcG1TcGF3biIsImFyZ3MiLCJvcHRzIiwiaGFzWWFybiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxhQUFhLEdBQUcsTUFBYztBQUNsQyxRQUFNQyxNQUFNLEdBQUcseUJBQWY7O0FBQ0EsVUFBUUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQXBCO0FBQ0UsU0FBSyxNQUFMO0FBQ0EsU0FBSyxLQUFMO0FBQ0UsYUFBT0YsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQW5COztBQUNGO0FBQ0UsVUFBSUYsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGNBQWhCLEVBQWdDO0FBQzlCO0FBQ0FDLFFBQUFBLE9BQU8sQ0FBQ0MsSUFBUixDQUFhQyxvQkFBV0MsT0FBeEIsRUFBaUNDLGVBQU1DLE1BQU4sQ0FBYyxvREFBbURULE1BQU8sRUFBeEUsQ0FBakM7QUFDRDs7QUFDRCxhQUFPQSxNQUFQO0FBVEo7QUFXRCxDQWJEOztlQWVlRCxhLEVBRWY7Ozs7QUFDTyxNQUFNVyxjQUFjLEdBQUcsQ0FBQ0MsSUFBRCxFQUF3QkMsSUFBeEIsS0FBc0UsOEJBQU1iLGFBQWEsRUFBbkIsRUFBdUJZLElBQXZCLEVBQTZCQyxJQUE3QixDQUE3Rjs7OztBQUVBLE1BQU1DLE9BQU8sR0FBRyxNQUFlZCxhQUFhLE9BQU8sTUFBbkQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IHsgQ3Jvc3NTcGF3bkFyZ3MsIENyb3NzU3Bhd25PcHRpb25zLCBzcGF3biB9IGZyb20gJ0BtYWxlcHQvY3Jvc3Mtc3Bhd24tcHJvbWlzZSc7XG5pbXBvcnQgbG9nU3ltYm9scyBmcm9tICdsb2ctc3ltYm9scyc7XG5pbXBvcnQgeWFybk9yTnBtIGZyb20gJ3lhcm4tb3ItbnBtJztcblxuY29uc3Qgc2FmZVlhcm5Pck5wbSA9ICgpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBzeXN0ZW0gPSB5YXJuT3JOcG0oKTtcbiAgc3dpdGNoIChwcm9jZXNzLmVudi5OT0RFX0lOU1RBTExFUikge1xuICAgIGNhc2UgJ3lhcm4nOlxuICAgIGNhc2UgJ25wbSc6XG4gICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9JTlNUQUxMRVI7XG4gICAgZGVmYXVsdDpcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0lOU1RBTExFUikge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLndhcm4obG9nU3ltYm9scy53YXJuaW5nLCBjaGFsay55ZWxsb3coYFVua25vd24gTk9ERV9JTlNUQUxMRVIsIHVzaW5nIGRldGVjdGVkIGluc3RhbGxlciAke3N5c3RlbX1gKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3lzdGVtO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBzYWZlWWFybk9yTnBtO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxuZXhwb3J0IGNvbnN0IHlhcm5Pck5wbVNwYXduID0gKGFyZ3M/OiBDcm9zc1NwYXduQXJncywgb3B0cz86IENyb3NzU3Bhd25PcHRpb25zKTogUHJvbWlzZTxzdHJpbmc+ID0+IHNwYXduKHNhZmVZYXJuT3JOcG0oKSwgYXJncywgb3B0cyk7XG5cbmV4cG9ydCBjb25zdCBoYXNZYXJuID0gKCk6IGJvb2xlYW4gPT4gc2FmZVlhcm5Pck5wbSgpID09PSAneWFybic7XG4iXX0=