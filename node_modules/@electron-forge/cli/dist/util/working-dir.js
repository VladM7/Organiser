"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = workingDir;

require("source-map-support/register");

var _fsExtra = _interopRequireDefault(require("fs-extra"));

var _path = _interopRequireDefault(require("path"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function workingDir(dir, cwd, checkExisting = true) {
  let finalDir = dir;

  if (cwd) {
    if (_path.default.isAbsolute(cwd) && (!checkExisting || _fsExtra.default.existsSync(cwd))) {
      finalDir = cwd;
    } else {
      const resolved = _path.default.resolve(finalDir, cwd);

      if (!checkExisting || _fsExtra.default.existsSync(resolved)) {
        finalDir = resolved;
      }
    }
  }

  return finalDir;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3dvcmtpbmctZGlyLnRzIl0sIm5hbWVzIjpbIndvcmtpbmdEaXIiLCJkaXIiLCJjd2QiLCJjaGVja0V4aXN0aW5nIiwiZmluYWxEaXIiLCJwYXRoIiwiaXNBYnNvbHV0ZSIsImZzIiwiZXhpc3RzU3luYyIsInJlc29sdmVkIiwicmVzb2x2ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFZSxTQUFTQSxVQUFULENBQ2JDLEdBRGEsRUFFYkMsR0FGYSxFQUdiQyxhQUFzQixHQUFHLElBSFosRUFJTDtBQUNSLE1BQUlDLFFBQVEsR0FBR0gsR0FBZjs7QUFDQSxNQUFJQyxHQUFKLEVBQVM7QUFDUCxRQUFJRyxjQUFLQyxVQUFMLENBQWdCSixHQUFoQixNQUF5QixDQUFDQyxhQUFELElBQWtCSSxpQkFBR0MsVUFBSCxDQUFjTixHQUFkLENBQTNDLENBQUosRUFBb0U7QUFDbEVFLE1BQUFBLFFBQVEsR0FBR0YsR0FBWDtBQUNELEtBRkQsTUFFTztBQUNMLFlBQU1PLFFBQVEsR0FBR0osY0FBS0ssT0FBTCxDQUFhTixRQUFiLEVBQXVCRixHQUF2QixDQUFqQjs7QUFDQSxVQUFJLENBQUNDLGFBQUQsSUFBa0JJLGlCQUFHQyxVQUFILENBQWNDLFFBQWQsQ0FBdEIsRUFBK0M7QUFDN0NMLFFBQUFBLFFBQVEsR0FBR0ssUUFBWDtBQUNEO0FBQ0Y7QUFDRjs7QUFFRCxTQUFPTCxRQUFQO0FBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMtZXh0cmEnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdvcmtpbmdEaXIoXG4gIGRpcjogc3RyaW5nLFxuICBjd2Q6IHN0cmluZyxcbiAgY2hlY2tFeGlzdGluZzogYm9vbGVhbiA9IHRydWUsXG4pOiBzdHJpbmcge1xuICBsZXQgZmluYWxEaXIgPSBkaXI7XG4gIGlmIChjd2QpIHtcbiAgICBpZiAocGF0aC5pc0Fic29sdXRlKGN3ZCkgJiYgKCFjaGVja0V4aXN0aW5nIHx8IGZzLmV4aXN0c1N5bmMoY3dkKSkpIHtcbiAgICAgIGZpbmFsRGlyID0gY3dkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXNvbHZlZCA9IHBhdGgucmVzb2x2ZShmaW5hbERpciwgY3dkKTtcbiAgICAgIGlmICghY2hlY2tFeGlzdGluZyB8fCBmcy5leGlzdHNTeW5jKHJlc29sdmVkKSkge1xuICAgICAgICBmaW5hbERpciA9IHJlc29sdmVkO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmaW5hbERpcjtcbn1cbiJdfQ==