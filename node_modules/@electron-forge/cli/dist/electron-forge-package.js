"use strict";

require("source-map-support/register");

var _core = require("@electron-forge/core");

var _fsExtra = _interopRequireDefault(require("fs-extra"));

var _get = require("@electron/get");

var _commander = _interopRequireDefault(require("commander"));

var _path = _interopRequireDefault(require("path"));

require("./util/terminate");

var _workingDir = _interopRequireDefault(require("./util/working-dir"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

(async () => {
  let dir = process.cwd();

  _commander.default.version((await _fsExtra.default.readJson(_path.default.resolve(__dirname, '../package.json'))).version).arguments('[cwd]').option('-a, --arch [arch]', 'Target architecture').option('-p, --platform [platform]', 'Target build platform').action(cwd => {
    dir = (0, _workingDir.default)(dir, cwd);
  }).parse(process.argv);

  (0, _get.initializeProxy)();
  const packageOpts = {
    dir,
    interactive: true
  };
  if (_commander.default.arch) packageOpts.arch = _commander.default.arch;
  if (_commander.default.platform) packageOpts.platform = _commander.default.platform;
  await _core.api.package(packageOpts);
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lbGVjdHJvbi1mb3JnZS1wYWNrYWdlLnRzIl0sIm5hbWVzIjpbImRpciIsInByb2Nlc3MiLCJjd2QiLCJwcm9ncmFtIiwidmVyc2lvbiIsImZzIiwicmVhZEpzb24iLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsImFyZ3VtZW50cyIsIm9wdGlvbiIsImFjdGlvbiIsInBhcnNlIiwiYXJndiIsInBhY2thZ2VPcHRzIiwiaW50ZXJhY3RpdmUiLCJhcmNoIiwicGxhdGZvcm0iLCJhcGkiLCJwYWNrYWdlIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFFQSxDQUFDLFlBQVk7QUFDWCxNQUFJQSxHQUFXLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBUixFQUFsQjs7QUFDQUMscUJBQ0dDLE9BREgsQ0FDVyxDQUFDLE1BQU1DLGlCQUFHQyxRQUFILENBQVlDLGNBQUtDLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixpQkFBeEIsQ0FBWixDQUFQLEVBQWdFTCxPQUQzRSxFQUVHTSxTQUZILENBRWEsT0FGYixFQUdHQyxNQUhILENBR1UsbUJBSFYsRUFHK0IscUJBSC9CLEVBSUdBLE1BSkgsQ0FJVSwyQkFKVixFQUl1Qyx1QkFKdkMsRUFLR0MsTUFMSCxDQUtXVixHQUFELElBQVM7QUFBRUYsSUFBQUEsR0FBRyxHQUFHLHlCQUFXQSxHQUFYLEVBQWdCRSxHQUFoQixDQUFOO0FBQTZCLEdBTGxELEVBTUdXLEtBTkgsQ0FNU1osT0FBTyxDQUFDYSxJQU5qQjs7QUFRQTtBQUVBLFFBQU1DLFdBQTJCLEdBQUc7QUFDbENmLElBQUFBLEdBRGtDO0FBRWxDZ0IsSUFBQUEsV0FBVyxFQUFFO0FBRnFCLEdBQXBDO0FBSUEsTUFBSWIsbUJBQVFjLElBQVosRUFBa0JGLFdBQVcsQ0FBQ0UsSUFBWixHQUFtQmQsbUJBQVFjLElBQTNCO0FBQ2xCLE1BQUlkLG1CQUFRZSxRQUFaLEVBQXNCSCxXQUFXLENBQUNHLFFBQVosR0FBdUJmLG1CQUFRZSxRQUEvQjtBQUV0QixRQUFNQyxVQUFJQyxPQUFKLENBQVlMLFdBQVosQ0FBTjtBQUNELENBcEJEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBpLCBQYWNrYWdlT3B0aW9ucyB9IGZyb20gJ0BlbGVjdHJvbi1mb3JnZS9jb3JlJztcblxuaW1wb3J0IGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCB7IGluaXRpYWxpemVQcm94eSB9IGZyb20gJ0BlbGVjdHJvbi9nZXQnO1xuaW1wb3J0IHByb2dyYW0gZnJvbSAnY29tbWFuZGVyJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5pbXBvcnQgJy4vdXRpbC90ZXJtaW5hdGUnO1xuaW1wb3J0IHdvcmtpbmdEaXIgZnJvbSAnLi91dGlsL3dvcmtpbmctZGlyJztcblxuKGFzeW5jICgpID0+IHtcbiAgbGV0IGRpcjogc3RyaW5nID0gcHJvY2Vzcy5jd2QoKTtcbiAgcHJvZ3JhbVxuICAgIC52ZXJzaW9uKChhd2FpdCBmcy5yZWFkSnNvbihwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vcGFja2FnZS5qc29uJykpKS52ZXJzaW9uKVxuICAgIC5hcmd1bWVudHMoJ1tjd2RdJylcbiAgICAub3B0aW9uKCctYSwgLS1hcmNoIFthcmNoXScsICdUYXJnZXQgYXJjaGl0ZWN0dXJlJylcbiAgICAub3B0aW9uKCctcCwgLS1wbGF0Zm9ybSBbcGxhdGZvcm1dJywgJ1RhcmdldCBidWlsZCBwbGF0Zm9ybScpXG4gICAgLmFjdGlvbigoY3dkKSA9PiB7IGRpciA9IHdvcmtpbmdEaXIoZGlyLCBjd2QpOyB9KVxuICAgIC5wYXJzZShwcm9jZXNzLmFyZ3YpO1xuXG4gIGluaXRpYWxpemVQcm94eSgpO1xuXG4gIGNvbnN0IHBhY2thZ2VPcHRzOiBQYWNrYWdlT3B0aW9ucyA9IHtcbiAgICBkaXIsXG4gICAgaW50ZXJhY3RpdmU6IHRydWUsXG4gIH07XG4gIGlmIChwcm9ncmFtLmFyY2gpIHBhY2thZ2VPcHRzLmFyY2ggPSBwcm9ncmFtLmFyY2g7XG4gIGlmIChwcm9ncmFtLnBsYXRmb3JtKSBwYWNrYWdlT3B0cy5wbGF0Zm9ybSA9IHByb2dyYW0ucGxhdGZvcm07XG5cbiAgYXdhaXQgYXBpLnBhY2thZ2UocGFja2FnZU9wdHMpO1xufSkoKTtcbiJdfQ==